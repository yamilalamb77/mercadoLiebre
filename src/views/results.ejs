<!DOCTYPE html>
<html lang="es">
<!-- Include Head -->
<%- include('partials/head', {title: 'Resultados de tu búsqueda'}) %>
<body>
	<!-- Header -->
	<%- include('partials/headerNavbar') %>
	<!-- /Header -->
	
	<!-- Banner -->
	<div class="banner"></div>
	<!-- /Banner -->

	<!-- todos los productos -->
	<div class="container products-wrapper">
		<div class="row">
			<div class="col-12">
				<h2 class="products-title">Resultados de la búsqueda: <%= search %></h2>
			</div>
			<% if (result.length > 0) { %> <!-- si la variable result es en su propiedad length es mayor a 0 (osea si tiene algo, que muestre algo) -->
				<% result.forEach(product => { %>
					<div class="col-12 col-sm-6 col-lg-3">
						<section class="product-box">
							<a href="/products/detail/<%- product.id%>"> <!-- esto es para la ruta parametrizada y el detalle de producto -->
								<figure class="product-box_image">
									<img src="/images/products/<%- product.image %>" alt="imagen de producto">
								</figure>
								<article class="product-box_data">
									<h2><%- toThousand(product.price - product.price * product.discount / 100)%></h2> <!-- aca hay que agarrar el precio final y aplicarle el descuento -->
									<span><%- product.discount !== 0 ? `${product.discount}% OFF` : "" %></span> <!-- aca hay que mostrar o no. el descuento si es que hay, LO QUE SE HIZO fue poner si el descuento es distinto a 0, mostrame el -- % off y si no nada -->
									<p><%- product.name %></p>
									<i class="fas fa-truck"></i>
								</article>
							</a>
						</section>
					</div>
				<% }) %>
			<%} else{ %>
			
				<div class="col-12">
					<h2 class="products-title" style="color: tomato;">No hay productos que coincidan con esa búsqueda</h2>
				</div>
				<%}  %>
			 
				

			
		</div>
	</div>
	<!-- /todos los productos -->

	<!-- footer -->
	<%- include('partials/footer') %>
	<!-- /footer -->
</body>	
</html>